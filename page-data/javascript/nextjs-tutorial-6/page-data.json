{"componentChunkName":"component---src-templates-blog-post-js","path":"/javascript/nextjs-tutorial-6/","result":{"data":{"site":{"siteMetadata":{"title":"HoJin9622's Devlog","author":"HoJin9622","siteUrl":"https://hojin9622.github.io","comment":{"disqusShortName":"","utterances":"HoJin9622/HoJin9622.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"410feb4d-8273-519c-b4db-73e618da709e","excerpt":"Data Fetching cra로 프로젝트를 만들어 데이터를 가져오는 방식 useEffect를 사용하고 axios를 이용하여 get을 한 후 데이터를 가져와 사이트의 페이지소스보기를 확인하면 불러온 데이터가 표시되지 않는 것을 볼 수 있다. 이러한 부분 때문에 그 데이터가 검색엔진에 노출되어야 한다, 서버사이드로 동작해야한다면 다른 방식으로 구현해야한다. getInitialProps GetUuid 컴포넌트에 getInitialProps를 추가해준다. getInitialProps…","html":"<h1 id=\"data-fetching\" style=\"position:relative;\"><a href=\"#data-fetching\" aria-label=\"data fetching permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Fetching</h1>\n<p>cra로 프로젝트를 만들어 데이터를 가져오는 방식</p>\n<p>useEffect를 사용하고 axios를 이용하여 get을 한 후 데이터를 가져와 사이트의 페이지소스보기를 확인하면</p>\n<p>불러온 데이터가 표시되지 않는 것을 볼 수 있다.</p>\n<p>이러한 부분 때문에 그 데이터가 검색엔진에 노출되어야 한다, 서버사이드로 동작해야한다면 다른 방식으로 구현해야한다.</p>\n<h1 id=\"getinitialprops\" style=\"position:relative;\"><a href=\"#getinitialprops\" aria-label=\"getinitialprops permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>getInitialProps</h1>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> Link <span class=\"token keyword\">from</span> <span class=\"token string\">'next/link'</span>\n<span class=\"token keyword\">import</span> axios <span class=\"token keyword\">from</span> <span class=\"token string\">'axios'</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">GetUuid</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"h-screen v-full flex flex-col justify-center items-center\"</span><span class=\"token operator\">></span>\n      <span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>uuid<span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"mt-4\"</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>Link href<span class=\"token operator\">=</span><span class=\"token string\">\"/\"</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>a<span class=\"token operator\">></span>돌아가기<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Link<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// getInitialProps</span>\nGetUuid<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">getInitialProps</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 반드시 async function 으로 작성</span>\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://localhost:1234'</span> <span class=\"token operator\">+</span> <span class=\"token string\">'/api/uuid'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    uuid<span class=\"token operator\">:</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>uuid<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> GetUuid</code></pre></div>\n<p>GetUuid 컴포넌트에 getInitialProps를 추가해준다.</p>\n<p>getInitialProps 함수는 반드시 async-await 으로 작성해주어야 한다.</p>\n<p>그 후 return 한 객체를 props로 사용할 수 있다.</p>\n<p>getInitialProps는 프론트단에서 render 되기전에 동작하게 된다.(새로고침 할때)</p>\n<p>홈페이지에서 getInitialProps가 있는 페이지로 갈 경우 프론트에서 동작함.(즉슨 양쪽에서 동작)</p>\n<p>getInitialProps는 pages 폴더 밑에서만 동작한다.(사용자가 생성한 component 폴더에서는 불가)</p>\n<h1 id=\"querystring\" style=\"position:relative;\"><a href=\"#querystring\" aria-label=\"querystring permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>queryString</h1>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Button <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'antd'</span>\n<span class=\"token keyword\">import</span> axios <span class=\"token keyword\">from</span> <span class=\"token string\">'axios'</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">GetDouble</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"w-full h-screen flex flex-col justify-center items-center\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"text-6xl\"</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n\n      <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"mt-4\"</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>Button<span class=\"token operator\">></span>돌아가기<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Button<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\nGetDouble<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">getInitialProps</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">context</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> value <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span>query<span class=\"token punctuation\">.</span>value\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'http://localhost:1234'</span> <span class=\"token operator\">+</span> <span class=\"token string\">'/api/double?value='</span> <span class=\"token operator\">+</span> value\n  <span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    value<span class=\"token operator\">:</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> GetDouble</code></pre></div>\n<p>get 주소는 숫자 하나를 보내면 두배로 반환해주는 api 이다.</p>\n<p>주소에 query string이 있으면(ex: localhost:1234/get-dobule?value=100)</p>\n<p>함수에 첫번째 인자로 context를 쓴 후 context.query 에서 데이터를 가져온다.</p>\n<p><code class=\"language-text\">{ value: &#39;100&#39; }</code> context.query의 console.log 내용이며 value는 querystring에 정의해준대로이다.</p>\n<h1 id=\"dynamic-route\" style=\"position:relative;\"><a href=\"#dynamic-route\" aria-label=\"dynamic route permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Dynamic Route</h1>\n<p>기존 작성하였던 파일을 get-double이라는 폴더를 만들고 get-double.js 파일의 이름을 <code class=\"language-text\">[value]</code>로 변경하고 get-double 폴더로 옮긴다.</p>\n<p>그 후 <code class=\"language-text\">localhost:1234/get-double/30</code> 으로 접속을하면 두배가 된 60의 값을 볼 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 274px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.31386861313869%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACPUlEQVQoz22Tu47TQBSGIxAS1Sok2cT22OO740vsLLGTtb25QsIlxRJxFQUCUSwlDUIUSDwANR3PAAU1Fa9BxwtQ0v3MTC6bRRSf58x4zj/nnDlTMU0THNsy0GjZOHvUwp8fFbx7WYNmhBiPSuR5juFwKNjaYRiiLEv4vg9d17HVqRiGIQyLQYiOvKfi+UpiowbDtJlDWzhHUSScXddFEATCjuMYtm1jqyEE+Ycv8FN8tlHVLFyra2w0QVUKTTuHUh3aZo3vV4kGna6j24oKwZCdrlOK5cOn+PDpM6a3biOMLUyXfUzuZshOYvSHCearHFkZY3wnE+s3TgcIOt4FUSHoep4QLMYzvHj9FkmvRJz6mN/LcdSPECVtdLMQ+fRICB5PukiLGINRF23fhaHvpUzpJnxVhSxJaNarCNwmHEuFJBG0DuU1TRmHdfa/IUFqKWLObUJUVgJN+HMqfLKuh4wqq92TZRO/v1/Cm2cHaKkmiyhA2HXQKwJ0rrtI+m10eh6CxBHIsgJFOWcnSJhgrUFwf1HH149X8WBRg8pSyGcdlPMujmexGDm9IkR/FCE9CVlWMhSyJ8jFeDEp1SDJFAc1Ay2JijQ4RCHMSRHjFl2nAnWT7j7iUhx73dSvHjfx88sVrBYKmpKJtufses5jF7ftQ9Eihrm7iH1EY3PBasPG+7M6fn27jNObMiTiYNBPMZlMUBQF0jRFlmVIkmT3Mrjvv2xeCp+w9nEM+J4Oiz1D23bgOBfh0e1H8z/Bv3vqYnxnnUjdAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"dynamic route\"\n        title=\"dynamic route\"\n        src=\"/static/fd176355fbb144e16375428b96fe7e10/d3fa7/dynamic_route.png\"\n        srcset=\"/static/fd176355fbb144e16375428b96fe7e10/d3fa7/dynamic_route.png 274w\"\n        sizes=\"(max-width: 274px) 100vw, 274px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>[value]가 아닌 [number]라고 작성하면 <code class=\"language-text\">context.query.number</code> 로 값을 불러오면 된다.</p>\n<h2 id=\"dynamic-route에-대한-link\" style=\"position:relative;\"><a href=\"#dynamic-route%EC%97%90-%EB%8C%80%ED%95%9C-link\" aria-label=\"dynamic route에 대한 link permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Dynamic Route에 대한 Link</h2>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>Link href<span class=\"token operator\">=</span><span class=\"token string\">\"/get-double/[value]\"</span> <span class=\"token keyword\">as</span><span class=\"token operator\">=</span><span class=\"token string\">\"/get-double/11\"</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>a<span class=\"token operator\">></span>Get Double <span class=\"token keyword\">of</span> <span class=\"token number\">11</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Link<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>Link href<span class=\"token operator\">=</span><span class=\"token string\">\"/get-double/[value]\"</span> <span class=\"token keyword\">as</span><span class=\"token operator\">=</span><span class=\"token string\">\"/get-double/33\"</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>a<span class=\"token operator\">></span>Get Double <span class=\"token keyword\">of</span> <span class=\"token number\">33</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Link<span class=\"token operator\">></span></code></pre></div>\n<p>as를 사용하여야서 이동하여야 한다.</p>","frontmatter":{"title":"[Next.js] Data Fetching & Dynamic Route","date":"October 04, 2020","thumbnail":null}}},"pageContext":{"slug":"/javascript/nextjs-tutorial-6/","previous":{"fields":{"slug":"/javascript/nextjs-tutorial-5/"},"frontmatter":{"title":"[Next.js] _document.js","category":"JavaScript","draft":false}},"next":{"fields":{"slug":"/javascript/es6-environment/"},"frontmatter":{"title":"[JavaScript]ES6 사용하기","category":"JavaScript","draft":false}}}}}